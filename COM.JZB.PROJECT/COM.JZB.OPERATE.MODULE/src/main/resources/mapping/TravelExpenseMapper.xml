<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jzb.operate.dao.TravelExpenseMapper">

	<!--根据出差id查询报销单-->
	<select id="queryTravelExpenseByid" resultType=" java.util.Map">
		select  * from tb_travel_expense where travelid = #{travelid}
	</select>

	 <!--插入-->
	<insert id="saveTravelExpense" parameterType="java.util.List">
		insert into tb_travel_expense
		(
			 travelid,
			 exid,
			 exstrtime , 
			 exendtime , 
			 exstradderss , 
			 exendadderss , 
			 exvehicle , 
			 trsum , 
			 mail , 
			 crosum , 
			 getaccsum , 
			 subsidy , 
			 othsum , 
			 "sum" ,
			 addtime ,
			 summary 
		)
		values
		<foreach collection="list" item="detials" separator=",">
		(
			<choose>
				<when test="detials.travelid != null and detials.travelid!=''">
					#{detials.travelid},
				</when>
				<otherwise>
					null ,
				</otherwise>
			</choose>
			<choose>
				<when test="detials.exid != null and detials.exid!=''">
					#{detials.exid},
				</when>
				<otherwise>
					null ,
				</otherwise>
			</choose>
			<choose>
				<when test="detials.exstrtime != null and detials.exstrtime!=''">
					#{detials.exstrtime},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.exendtime != null and detials.exendtime!=''">
					#{detials.exendtime},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.exstradderss != null and detials.exstradderss!=''">
					#{detials.exstradderss},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.exendadderss != null and detials.exendadderss!=''">
					#{detials.exendadderss},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.exvehicle != null and detials.exvehicle!=''">
					#{detials.exvehicle},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.trsum != null and detials.trsum!=''">
					#{detials.trsum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.mail != null and detials.mail!=''">
					#{detials.mail},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.crosum != null and detials.crosum!=''">
					#{detials.crosum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.getaccsum != null and detials.getaccsum!=''">
					#{detials.getaccsum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.subsidy != null and detials.subsidy!=''">
					#{detials.subsidy},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.othsum != null and detials.othsum!=''">
					#{detials.othsum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.sum != null and detials.sum!=''">
					#{detials.sum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.addtime != null and detials.addtime!=''">
					#{detials.addtime},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="detials.summary != null and detials.summary!=''">
					#{detials.summary}
				</when>
				<otherwise>
					null
				</otherwise>
			</choose>
		)
		</foreach>
	</insert>
	<!--修改报销单 -->
	<update id="updateTravelExpense" parameterType=" java.util.list">
		update tb_travel_expense
		set
		<foreach collection="list" item="uplists" separator=",">

			<choose>
				<when test="uplists.travelid != null and uplists.travelid!=''">
					#{uplists.travelid},
				</when>
				<otherwise>
					null ,
				</otherwise>
			</choose>
			<choose>
				<when test="uplists.exid != null and uplists.exid!=''">
					#{uplists.exid},
				</when>
				<otherwise>
					null ,
				</otherwise>
			</choose>
			<choose>
				<when test="uplists.exstrtime != null and uplists.exstrtime!=''">
					#{uplists.exstrtime},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.exendtime != null and uplists.exendtime!=''">
					#{uplists.exendtime},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.exstradderss != null and uplists.exstradderss!=''">
					#{uplists.exstradderss},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.exendadderss != null and uplists.exendadderss!=''">
					#{uplists.exendadderss},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.exvehicle != null and uplists.exvehicle!=''">
					#{uplists.exvehicle},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.trsum != null and uplists.trsum!=''">
					#{uplists.trsum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.mail != null and uplists.mail!=''">
					#{uplists.mail},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.crosum != null and uplists.crosum!=''">
					#{uplists.crosum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.getaccsum != null and uplists.getaccsum!=''">
					#{uplists.getaccsum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.subsidy != null and uplists.subsidy!=''">
					#{uplists.subsidy},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.othsum != null and uplists.othsum!=''">
					#{uplists.othsum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.sum != null and uplists.sum!=''">
					#{uplists.sum},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.addtime != null and uplists.addtime!=''">
					#{uplists.addtime},
				</when>
				<otherwise>
					null,
				</otherwise>
			</choose>

			<choose>
				<when test="uplists.summary != null and uplists.summary!=''">
					#{uplists.summary}
				</when>
				<otherwise>
					null
				</otherwise>
			</choose>
		</foreach>
	</update>


</mapper>