<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jzb.resource.dao.TbSolutionTypeMapper">


    <!--1.查询方案类型（父子级）-->
    <select id="querySolutionType" resultType="java.util.Map" parameterType="java.util.Map">
                    WITH RECURSIVE solution AS (
						SELECT
               id,typeid,cname,parentid,typedesc,adduid,addtime,upduid,updtime,status
            FROM
                tb_solution_type
            WHERE
                parentid = '0000000'
                AND status = '1'  UNION ALL
            SELECT
                aa.id,aa.typeid,aa.cname,aa.parentid,aa.typedesc,aa.adduid,aa.addtime,aa.upduid,aa.updtime,aa.status
            FROM
                tb_solution_type aa
                JOIN solution ON aa.parentid = solution.typeid
                AND aa.status = '1'
            ) SELECT
            solution.*
        FROM
            solution order by solution.id
    </select>

</mapper>