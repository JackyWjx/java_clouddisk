<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jzb.message.dao.MessageOrganizeMapper">


    <!-- 查询 -->
    <select id="queryMsgOrganize" resultType="java.util.Map" parameterType="java.util.Map">
        select * from tb_message_organize where status = '1'
        limit  #{rows}  offset #{page}
    </select>

    <!-- 查询总数 -->
    <select id="queryMsgOrganizeCount" resultType="java.lang.Integer" parameterType="java.util.Map">
        select count(1) from tb_message_organize where status = '1'
    </select>

    <!-- 模糊查询 -->
    <select id="searchMsgOrganize" resultType="java.util.Map" parameterType="java.util.Map">
        select * from tb_message_organize where status = '1' and manager like CONCAT('%',#{manager},'%')
        limit  #{rows}  offset #{page}
    </select>

    <!-- 模糊查询总数 -->
    <select id="searchMsgOrganizeCount" resultType="java.lang.Integer" parameterType="java.util.Map">
         select count(1) from tb_message_organize where status = '1' and manager like CONCAT('%',#{manager},'%')
    </select>

    <!-- 添加 -->
    <insert id="insertMsgOrganize" parameterType="java.util.Map">
        INSERT INTO tb_message_organize ( cid, cname, uscc, appid, secret, checkcode, callback, managerid,
        manager,relphone,adduid,addtime,ouid,upduid,updtime,status,summary )
        VALUES
        ( #{cid},
        #{cname},
        #{uscc},
        #{appid},
        #{secret},
        #{checkcode},
        #{callback},
        #{managerid},
        #{manager},
        #{relphone},
        #{adduid},
        #{addtime},
        #{ouid},
        #{upduid},
        #{updtime},
        #{status},
        <choose>
            <when test="summary != null">#{summary}</when>
            <otherwise>null</otherwise>
        </choose>
        );
    </insert>

    <!-- 修改 -->
    <update id="updateMsgOrganize" parameterType="java.util.Map">
        update tb_message_organize set status = '1'
        <choose>
            <when test="cid != null">,cid = #{cid}</when>
        </choose>
        <choose>
            <when test="cname != null">,cname = #{cname}</when>
        </choose>
        <choose>
            <when test="uscc != null">,uscc = #{uscc}</when>
        </choose>
        <choose>
            <when test="appid != null">,appid = #{appid}</when>
        </choose>
        <choose>
            <when test="secret != null">,secret = #{secret}</when>
        </choose>
        <choose>
            <when test="checkcode != null">,checkcode = #{checkcode}</when>
        </choose>
        <choose>
            <when test="callback != null">,callback = #{callback}</when>
        </choose>
        <choose>
            <when test="managerid != null">,managerid = #{managerid}</when>
        </choose>
        <choose>
            <when test="manager != null">,manager = #{manager}</when>
        </choose>
        <choose>
            <when test="relphone != null">,relphone = #{relphone}</when>
        </choose>
        <choose>
            <when test="adduid != null">,adduid = #{adduid}</when>
        </choose>
        <choose>
            <when test="addtime != null">,addtime = #{addtime}</when>
        </choose>
        <choose>
            <when test="ouid != null">,ouid = #{ouid}</when>
        </choose>
        <choose>
            <when test="upduid != null">,upduid = #{upduid}</when>
        </choose>
        <choose>
            <when test="updtime != null">,updtime = #{updtime}</when>
        </choose>
        <choose>
            <when test="summary != null">,summary = #{summary}</when>
        </choose>
        where id = #{id}
    </update>

    <!-- 禁用 -->
    <update id="deleteMsgOrganize" parameterType="java.util.Map">
        update  tb_message_organize set  status = '2' where id = #{id}
    </update>


</mapper>
